<Form @data={{this.initialData}} @onSubmit={{this.save}} as |form data|>
  <form.Field
    @name="email"
    @title="Email"
    @validation="required"
    @format="large"
    as |field|
  >
    <field.Input @type="email" />
  </form.Field>

  <form.Field
    @name="expiration_date"
    @title="Expiration Date"
    @validation="required"
    @format="large"
    as |field|
  >
    <field.Input @type="date" />
  </form.Field>

  <form.Section @title="Metadata">
    <form.Container>
      <form.Button
        @label="Add_metadata"
        @action={{fn this.addMetadata form data}}
      />
    </form.Container>

    {{#each data.metadata as |pair index|}}
      <form.Container class="invite-metadata-row">
        <form.Field
          @name="meta_key"
          @title="Key"
          @validation="required"
          @format="small"
           as |field|
         @action={{fn this.updateMetadata form data index "key"}}
       >
       <field.Input @type="text" />
      </form.Field>

    <form.Field
       @name="meta_value"
       @title="Value"
       @validation="required"
       @format="small"
        as |field|
       @action={{fn this.updateMetadata form data index "value"}}
       >
      <field.Input @type="text" />
     </form.Field>

        <form.Button
          class="btn-danger"
          @label="Remove"
          @action={{fn this.removeMetadata form data index}}
        />
      </form.Container>
    {{/each}}
  </form.Section>

  <form.Actions>
    <form.Submit @disabled={{this.isSaving}} />
  </form.Actions>
</Form>
